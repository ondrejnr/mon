{"apiVersion": "apps/v1", "kind": "Deployment", "metadata": {"annotations": {"deployment.kubernetes.io/revision": "15", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\":\"apps/v1\",\"kind\":\"Deployment\",\"metadata\":{\"annotations\":{},\"name\":\"apache-php\",\"namespace\":\"lamp\"},\"spec\":{\"replicas\":1,\"selector\":{\"matchLabels\":{\"app\":\"apache-php\"}},\"template\":{\"metadata\":{\"labels\":{\"app\":\"apache-php\"}},\"spec\":{\"containers\":[{\"image\":\"httpd:alpine\",\"name\":\"apache\",\"ports\":[{\"containerPort\":80}],\"volumeMounts\":[{\"mountPath\":\"/usr/local/apache2/htdocs\",\"name\":\"www\"}]},{\"image\":\"php:fpm-alpine\",\"name\":\"phpfpm\",\"ports\":[{\"containerPort\":9000}],\"volumeMounts\":[{\"mountPath\":\"/var/www/html\",\"name\":\"www\"}]},{\"image\":\"bitnami/apache-exporter:latest\",\"name\":\"apache-exporter\",\"ports\":[{\"containerPort\":9117}]},{\"args\":[\"--phpfpm.scrape-uri\",\"tcp://127.0.0.1:9000/status\"],\"image\":\"hipages/php-fpm_exporter:2\",\"name\":\"phpfpm-exporter\",\"ports\":[{\"containerPort\":9253}]}],\"volumes\":[{\"emptyDir\":{},\"name\":\"www\"}]}}}}\n"}, "name": "apache-php", "namespace": "lamp"}, "spec": {"progressDeadlineSeconds": 600, "replicas": 1, "revisionHistoryLimit": 10, "selector": {"matchLabels": {"app": "apache-php"}}, "strategy": {"rollingUpdate": {"maxSurge": "25%", "maxUnavailable": "25%"}, "type": "RollingUpdate"}, "template": {"metadata": {"annotations": {"kubectl.kubernetes.io/restartedAt": "2026-02-26T21:24:46Z", "prometheus.io/path": "/metrics", "prometheus.io/port": "9117", "prometheus.io/scrape": "true"}, "labels": {"app": "apache-php"}}, "spec": {"containers": [{"image": "httpd:alpine", "imagePullPolicy": "IfNotPresent", "name": "apache", "ports": [{"containerPort": 80, "protocol": "TCP"}], "resources": {}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/usr/local/apache2/htdocs", "name": "www"}, {"mountPath": "/usr/local/apache2/conf/httpd.conf", "name": "apache-config", "subPath": "httpd.conf"}, {"mountPath": "/usr/local/apache2/htdocs/index.php", "name": "bank-index", "subPath": "index.php"}]}, {"image": "php:fpm-alpine", "imagePullPolicy": "IfNotPresent", "name": "phpfpm", "ports": [{"containerPort": 9000, "protocol": "TCP"}], "resources": {}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/var/www/html", "name": "www"}, {"mountPath": "/usr/local/apache2/htdocs", "name": "www"}]}, {"image": "bitnami/apache-exporter:latest", "imagePullPolicy": "Always", "name": "apache-exporter", "ports": [{"containerPort": 9117, "protocol": "TCP"}], "resources": {}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File"}, {"args": ["--phpfpm.scrape-uri", "tcp://127.0.0.1:9000/status"], "image": "hipages/php-fpm_exporter:2", "imagePullPolicy": "IfNotPresent", "name": "phpfpm-exporter", "ports": [{"containerPort": 9253, "protocol": "TCP"}], "resources": {}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File"}], "dnsPolicy": "ClusterFirst", "initContainers": [{"command": ["sh", "-c", "echo \"<?php phpinfo(); ?>\" > /usr/local/apache2/htdocs/index.php && cat /usr/local/apache2/htdocs/index.php"], "image": "busybox", "imagePullPolicy": "Always", "name": "init-index", "resources": {}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File", "volumeMounts": [{"mountPath": "/usr/local/apache2/htdocs", "name": "www"}]}], "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "terminationGracePeriodSeconds": 30, "volumes": [{"emptyDir": {}, "name": "www"}, {"configMap": {"defaultMode": 420, "name": "apache-php-config"}, "name": "apache-config"}, {"configMap": {"defaultMode": 420, "name": "bank-index-php"}, "name": "bank-index"}]}}}}
{"apiVersion": "apps/v1", "kind": "Deployment", "metadata": {"annotations": {"deployment.kubernetes.io/revision": "1", "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\":\"apps/v1\",\"kind\":\"Deployment\",\"metadata\":{\"annotations\":{},\"name\":\"postgresql\",\"namespace\":\"lamp\"},\"spec\":{\"replicas\":1,\"selector\":{\"matchLabels\":{\"app\":\"postgresql\"}},\"template\":{\"metadata\":{\"labels\":{\"app\":\"postgresql\"}},\"spec\":{\"containers\":[{\"env\":[{\"name\":\"POSTGRES_PASSWORD\",\"value\":\"password\"},{\"name\":\"POSTGRES_DB\",\"value\":\"bank\"}],\"image\":\"postgres:15\",\"name\":\"postgresql\",\"ports\":[{\"containerPort\":5432}]}]}}}}\n"}, "name": "postgresql", "namespace": "lamp"}, "spec": {"progressDeadlineSeconds": 600, "replicas": 1, "revisionHistoryLimit": 10, "selector": {"matchLabels": {"app": "postgresql"}}, "strategy": {"rollingUpdate": {"maxSurge": "25%", "maxUnavailable": "25%"}, "type": "RollingUpdate"}, "template": {"metadata": {"labels": {"app": "postgresql"}}, "spec": {"containers": [{"env": [{"name": "POSTGRES_PASSWORD", "value": "password"}, {"name": "POSTGRES_DB", "value": "bank"}], "image": "postgres:15", "imagePullPolicy": "IfNotPresent", "name": "postgresql", "ports": [{"containerPort": 5432, "protocol": "TCP"}], "resources": {}, "terminationMessagePath": "/dev/termination-log", "terminationMessagePolicy": "File"}], "dnsPolicy": "ClusterFirst", "restartPolicy": "Always", "schedulerName": "default-scheduler", "securityContext": {}, "terminationGracePeriodSeconds": 30}}}}
