{
  "title": "Online Retail – Combined Dashboard (ClickHouse, InfluxDB, Aplikácie, Logging)",
  "uid": "online-retail-combined-6789",
  "panels": [
    {
      "title": "ClickHouse – Počet dopytov",
      "targets": [
        {
          "expr": "rate(ClickHouseProfileEvents_Query{namespace=\"clickhouse\"}[5m])",
          "legendFormat": "dopyty/s"
        }
      ]
    },
    {
      "title": "ClickHouse – Využitie disku",
      "targets": [
        {
          "expr": "clickhouse_disk_used_bytes{namespace=\"clickhouse\"}",
          "legendFormat": "použité"
        },
        {
          "expr": "clickhouse_disk_total_bytes{namespace=\"clickhouse\"}",
          "legendFormat": "celkom"
        }
      ]
    },
    {
      "title": "InfluxDB – Počet zápisov",
      "targets": [
        {
          "expr": "rate(influxdb_httpd_requests_total{handler=\"write\"}[5m])",
          "legendFormat": "zápisy/s"
        }
      ]
    },
    {
      "title": "InfluxDB – Počet čítaní",
      "targets": [
        {
          "expr": "rate(influxdb_httpd_requests_total{handler=\"query\"}[5m])",
          "legendFormat": "čítania/s"
        }
      ]
    },
    {
      "title": "Aplikácie – Počet requestov",
      "targets": [
        {
          "expr": "sum(rate(http_requests_total{namespace=\"online-retail\"}[5m])) by (service)",
          "legendFormat": "{{service}}"
        }
      ]
    },
    {
      "title": "Aplikácie – HTTP chybovosť (5xx)",
      "targets": [
        {
          "expr": "sum(rate(http_requests_total{namespace=\"online-retail\", status=~\"5..\"}[5m])) by (service)",
          "legendFormat": "{{service}}"
        }
      ]
    },
    {
      "title": "Aplikácie – Počet podov",
      "targets": [
        {
          "expr": "count(kube_pod_info{namespace=\"online-retail\"})",
          "legendFormat": "pody"
        }
      ]
    },
    {
      "title": "Elasticsearch – Health",
      "targets": [
        {
          "expr": "elasticsearch_cluster_health_status{color=\"green\"} or elasticsearch_cluster_health_status{color=\"yellow\"} or elasticsearch_cluster_health_status{color=\"red\"}",
          "legendFormat": "status"
        }
      ]
    },
    {
      "title": "Elasticsearch – Počet dokumentov",
      "targets": [
        {
          "expr": "sum(elasticsearch_indices_docs_count)",
          "legendFormat": "dokumenty"
        }
      ]
    },
    {
      "title": "Vector – Počet spracovaných eventov",
      "targets": [
        {
          "expr": "rate(vector_component_received_events_total{component_kind=\"source\"}[5m])",
          "legendFormat": "prijaté"
        },
        {
          "expr": "rate(vector_component_sent_events_total{component_kind=\"sink\"}[5m])",
          "legendFormat": "odoslané"
        }
      ]
    },
    {
      "title": "Logy podľa namespace (Elasticsearch)",
      "targets": [
        {
          "expr": "sum(elasticsearch_indices_docs_count{index=~\"logs-.*\"}) by (index)",
          "legendFormat": "{{index}}"
        }
      ]
    }
  ]
}
